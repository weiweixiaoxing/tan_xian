<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>天地玄妙 - 农历计算器</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", sans-serif;
            background-image: url("./backgrounds/background.jpg");
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            margin: 0;
            padding: 0;
            color: #333;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            overflow: hidden;
            position: relative;
        }
        
        .container {
            width: 394px;
            height: 856px;
            margin: 20px auto;
            background: white;
            opacity: 0.68;
            overflow-y: auto;
            overflow-x: hidden;
            position: relative;
            z-index: 1;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            border-radius: 20px;
        }
        
        /* 第一行：系统时间 */
        .time-row {
            padding: 15px 20px;
            background: white;
            border-bottom: 1px solid #e0e0e0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            gap: 31px;
        }
        
        .system-time {
            color: #d32f2f;
            font-weight: 600;
            font-size: 18px;
        }
        
        .laibin-time {
            color: #d32f2f;
            font-size: 14px;
        }
        
        /* 第二行：农历输出 */
        .lunar-row {
            padding: 12px 20px;
            background: white;
            border-bottom: 1px solid #e0e0e0;
            font-size: 16px;
            color: #333;
            text-align: center;
        }
        
        .lunar-text {
            color: #333;
        }
        
        .jieqi-text {
            color: #1976d2;
            margin-left: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- 标题：天元乌兔择日 -->
        <div style="padding: 21px 20px 8px 20px; text-align: center; font-weight: bold; font-size: 20px; margin: 2px 0;">
            天元乌兔择日
        </div>
        
        <!-- 第一行：系统时间 -->
        <div class="time-row" style="padding: 5px 20px 8px 20px;">
            <span class="system-time" id="systemTime">--:--:--</span>
            <span class="laibin-time" id="laibinTime">--:--:--</span>
        </div>
        
        <!-- 第二行：农历输出 -->
        <div class="lunar-row">
            <span class="lunar-text" id="lunarText">加载中...</span>
            <span class="jieqi-text" id="jieqiText"></span>
        </div>
    </div>
    
    <!-- 引入lunar-javascript库 -->
    <script src="https://cdn.jsdelivr.net/npm/lunar-javascript@latest/dist/index.umd.min.js"></script>
    
    <script>
        // 更新时间和页面信息
        function updateTimeAndInfo() {
            const now = new Date();
            const now_solar = lunar.Solar.fromDate(now);
            const now_lunar = now_solar.getLunar();
            
            // 更新系统时间
            const systemTimeElement = document.getElementById('systemTime');
            const laibinTimeElement = document.getElementById('laibinTime');
            
            const systemTime = now.toLocaleTimeString('zh-CN');
            systemTimeElement.textContent = systemTime;
            
            // 更新农历信息
            const lunarTextElement = document.getElementById('lunarText');
            const jieqiTextElement = document.getElementById('jieqiText');
            
            const lunarYear = now_lunar.getYear();
            const lunarMonth = now_lunar.getMonth();
            const lunarDay = now_lunar.getDay();
            const lunarMonthStr = lunarMonth < 0 ? '闰' + Math.abs(lunarMonth) : lunarMonth;
            
            lunarTextElement.textContent = `${lunarYear}年${lunarMonthStr}月${lunarDay}日`;
            
            // 获取节气
            try {
                const jq = now_lunar.getJieQi();
                if (jq) {
                    jieqiTextElement.textContent = jq.getName();
                }
            } catch (e) {
                // 忽略错误
            }
        }
        
        // 页面加载完成后初始化
        window.onload = function() {
            // 初始更新
            updateTimeAndInfo();
            
            // 每秒更新一次时间
            setInterval(updateTimeAndInfo, 1000);
        };
    </script>
</body>
</html>